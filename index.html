<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Glosario Interactivo de Miner√≠a</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; background-color: #f8f7f4; color: #4a4a4a; }
        .card-container { perspective: 1000px; }
        .card { position: relative; transform-style: preserve-3d; transition: transform 0.6s; cursor: pointer; }
        .card.is-flipped { transform: rotateY(180deg); }
        .card-face { position: absolute; width: 100%; height: 100%; backface-visibility: hidden; -webkit-backface-visibility: hidden;
            display: flex; justify-content: center; align-items: center; border-radius: 0.75rem; }
        .card-front { background-color: #ffffff; border: 1px solid #e2e8f0; }
        .card-back { background-color: #e3f2fd; color: #1e3a8a; transform: rotateY(180deg); }
        .filter-btn { transition: all 0.2s ease-in-out; }
        .filter-btn.active { background-color: #2563eb; color: #ffffff; box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1); }
        /* animaci√≥n de recompensa */
        .coin-animation { position: absolute; animation: rise 1s ease-out forwards; }
        @keyframes rise {
            from { opacity: 1; transform: translateY(0); }
            to { opacity: 0; transform: translateY(-50px); }
        }
    </style>
</head>
<body class="antialiased">
    <div class="container mx-auto px-4 py-8 md:py-12">
        <header class="text-center mb-8 md:mb-12">
            <h1 class="text-3xl md:text-4xl font-bold text-gray-800">Glosario Interactivo de Miner√≠a</h1>
            <p class="mt-2 text-lg text-gray-600">Vocabulario para construcci√≥n y operaci√≥n diaria</p>
        </header>

        <div class="mb-8 md:mb-10">
            <div id="filters" class="flex flex-wrap justify-center gap-2 md:gap-3 mb-4"></div>
            <div class="max-w-xl mx-auto">
                <input type="text" id="search" placeholder="Buscar un t√©rmino en espa√±ol..." class="w-full px-4 py-3 border border-gray-300 rounded-full shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition">
            </div>
        </div>

        <main id="vocabulary-grid" class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4 md:gap-6"></main>
        
        <div id="no-results" class="text-center py-10 text-gray-500 text-xl hidden">
            <p>No se encontraron resultados.</p>
        </div>
    </div>

    <!-- Contador de monedas -->
    <div id="reward-system" class="fixed top-4 right-4 bg-yellow-200 text-yellow-800 px-4 py-2 rounded-full shadow-lg flex items-center space-x-2">
        <span>üí∞</span>
        <span id="coin-count">0</span>
    </div>

    <div class="flex justify-center items-center mt-6">
        <div>Create with ‚ù§Ô∏è by Ëè≤Âà©ÊôÆ</div>
    </div>

    <script>
        const vocabularyData = [
            { category: 'General', es: 'Empresa Minera', ch: 'Áüø‰∏öÂÖ¨Âè∏', pi: 'Ku√†ngy√® G≈çngsƒ´' },
            { category: 'General', es: 'Mina', ch: 'ÁüøÂ±±', pi: 'Ku√†ngshƒÅn' },
            { category: 'General', es: 'Mina a Cielo Abierto', ch: 'Èú≤Â§©Áüø', pi: 'L√πtiƒÅn Ku√†ng' },
            { category: 'General', es: 'Construcci√≥n', ch: 'ÊñΩÂ∑•', pi: 'Shƒ´g≈çng' },
            { category: 'General', es: 'Proyecto', ch: 'È°πÁõÆ', pi: 'Xi√†ngm√π' },
            { category: 'General', es: 'Equipo', ch: 'Âõ¢Èòü', pi: 'Tu√°ndu√¨' },
            { category: 'General', es: 'Seguridad', ch: 'ÂÆâÂÖ®', pi: 'ƒÄnqu√°n' },
            { category: 'General', es: 'Salud', ch: 'ÂÅ•Â∫∑', pi: 'Ji√†nkƒÅng' },
            { category: 'General', es: 'Medio Ambiente', ch: 'ÁéØÂ¢É', pi: 'Hu√°nj√¨ng' },
            { category: 'General', es: 'Permiso', ch: 'ËÆ∏ÂèØËØÅ', pi: 'X«îkƒõzh√®ng' },
            { category: 'General', es: 'Reuni√≥n', ch: '‰ºöËÆÆ', pi: 'Hu√¨y√¨' },
            { category: 'General', es: 'Informe', ch: 'Êä•Âëä', pi: 'B√†og√†o' },
            { category: 'General', es: 'Horario', ch: 'Êó∂Èó¥Ë°®', pi: 'Sh√≠jiƒÅnbi«éo' },
            { category: 'General', es: 'Supervisor', ch: '‰∏ªÁÆ°', pi: 'Zh«îgu«én' },
            { category: 'General', es: 'Ingeniero', ch: 'Â∑•Á®ãÂ∏à', pi: 'G≈çngch√©ngshƒ´' }
        ];

        const grid = document.getElementById('vocabulary-grid');
        const filtersContainer = document.getElementById('filters');
        const searchInput = document.getElementById('search');
        const noResults = document.getElementById('no-results');
        const coinDisplay = document.getElementById("coin-count");
        
        let activeFilter = 'Todos';
        let spanishVoice = null;
        let coins = parseInt(localStorage.getItem("coins")) || 0;
        coinDisplay.textContent = coins;

        const categories = ['Todos', ...new Set(vocabularyData.map(item => item.category))];

        function setupFilters() {
            categories.forEach(category => {
                const btn = document.createElement('button');
                btn.className = 'filter-btn px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-full hover:bg-gray-100';
                btn.textContent = category;
                if (category === 'Todos') btn.classList.add('active');
                btn.addEventListener('click', () => {
                    activeFilter = category;
                    document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
                    btn.classList.add('active');
                    searchInput.value = '';
                    renderGrid();
                });
                filtersContainer.appendChild(btn);
            });
        }

        function renderGrid() {
            grid.innerHTML = '';
            const searchTerm = searchInput.value.toLowerCase();
            
            const filteredData = vocabularyData.filter(item => {
                const inCategory = activeFilter === 'Todos' || item.category === activeFilter;
                const inSearch = item.es.toLowerCase().includes(searchTerm);
                return inCategory && inSearch;
            });

            if (filteredData.length === 0) {
                noResults.classList.remove('hidden');
                grid.classList.add('hidden');
            } else {
                noResults.classList.add('hidden');
                grid.classList.remove('hidden');
            }

            filteredData.forEach(item => {
                const cardHtml = `
                    <div class="card-container h-32 md:h-36 relative">
                        <div class="card w-full h-full">
                            <div class="card-face card-front p-2 text-center flex flex-col justify-center items-center">
                                <span class="text-base font-semibold text-gray-800">${item.es}</span>
                                <button onclick="rewardAndSpeak('${item.es.replace(/'/g, "\\'")}')" 
                                        class="mt-2 text-blue-600 hover:text-blue-800">
                                    üîä
                                </button>
                            </div>
                            <div class="card-face card-back p-2 flex flex-col justify-center items-center text-center">
                                <span class="text-xl font-bold">${item.ch}</span>
                                <span class="text-sm text-blue-800 opacity-90 mt-1">${item.pi}</span>
                            </div>
                        </div>
                    </div>
                `;
                grid.innerHTML += cardHtml;
            });

            document.querySelectorAll('.card').forEach(card => {
                card.addEventListener('click', (e) => {
                    if (!e.target.closest('button')) {
                        card.classList.toggle('is-flipped');
                    }
                });
            });
        }

        function setSpanishVoice() {
            const voices = speechSynthesis.getVoices();
            spanishVoice = voices.find(voice => voice.lang.startsWith('es'));
        }

        function speak(text) {
            const utterance = new SpeechSynthesisUtterance(text);
            utterance.lang = 'es-ES';
            if (spanishVoice) utterance.voice = spanishVoice;
            speechSynthesis.speak(utterance);
        }

        function rewardAndSpeak(text) {
            speak(text);
            updateCoins(1);
        }

        function updateCoins(amount) {
            coins += amount;
            coinDisplay.textContent = coins;
            localStorage.setItem("coins", coins);

            // animaci√≥n de recompensa
            const reward = document.createElement("div");
            reward.textContent = "+1 üí∞";
            reward.className = "coin-animation text-yellow-500 text-2xl font-bold";
            reward.style.left = "50%";
            reward.style.top = "50%";
            reward.style.position = "fixed";
            reward.style.transform = "translate(-50%, -50%)";
            document.body.appendChild(reward);
            setTimeout(() => reward.remove(), 1000);
        }

        searchInput.addEventListener('input', () => {
            document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
            const allButton = Array.from(document.querySelectorAll('.filter-btn')).find(b => b.textContent === 'Todos');
            if (allButton) allButton.classList.add('active');
            activeFilter = 'Todos';
            renderGrid();
        });

        // Inicializaci√≥n de voces en espa√±ol
        speechSynthesis.onvoiceschanged = setSpanishVoice;

        document.addEventListener('DOMContentLoaded', () => {
            setSpanishVoice();
            setupFilters();
            renderGrid();
        });
    </script>
</body>
</html>
